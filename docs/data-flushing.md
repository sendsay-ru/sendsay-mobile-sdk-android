## Отправка данных

SDK кэширует данные (сессии, события, свойства клиентов и т.д.) во внутренней базе данных и периодически отправляет их в CDP Sendsay. После успешной отправки данные обновляют значения в базе аккаунта, а затем удаляются кэша SDK. Этот процесс называется **отправкой данных**.

По умолчанию SDK отправляет данные сразу после их отслеживания или при переходе приложения в фоновый режим. При необходимости вы можете изменить [режим отправки](#режимы-отправки)￼ и адаптировать поведение под ваше приложение.

Вы можете полностью отключить автоматическую отправку. В этом случае данные нужно [передавать вручную](#ручная-отправка) — каждый раз, когда они накопились и готовы к отправке.

SDK отправляет данные только при наличии стабильного интернет-соединения. Если во время отправки произошла ошибка, данные останутся в кэше и будут отправлены позже — как только соединение восстановится.

## Режимы отправки

SDK поддерживает 4 режима отправки (определены в `com.sendsay.sdk.models.FlushMode`), которые задают частоту или условия автоматической отправки данных.

| Название              | Описание |
| --------------------- | ----------- |
| `IMMEDIATE` (по умолчанию) | Отправляет все данные сразу после их получения. |
| `APP_CLOSE`           | Отправляет данные при потере активного состояния приложения. |
| `PERIOD`              | Отправляет данные через интервал, заданный в `Sendsay.flushPeriod`, а также при закрытии приложения или переходе в фоновый режим. |
| `MANUAL`              | Полностью отключает автоматическую отправку. Данные необходимо отправлять [вручную](#ручная-отправка). |

Чтобы установить режим отправки, сначала инициализируйте SDK, затем установите `flushMode` напрямую в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.MANUAL
```

Для режима `PERIOD` интервал по умолчанию составляет **60 минут**. Чтобы задать другой интервал (используя `com.sendsay.sdk.models.FlushPeriod`), установите:`flushPeriod` в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.PERIOD
Sendsay.flushPeriod = FlushPeriod(10, TimeUnit.MINUTES)
```

## Ручная отправка

Чтобы вручную инициировать отправку данных в Sendsay, используйте:

```kotlin
Sendsay.flushData()
```
