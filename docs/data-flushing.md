---
title: Сброс данных
excerpt: Узнайте, как Android SDK загружает данные в Engagement API и как настроить это поведение
slug: android-sdk-data-flushing
categorySlug: integrations
parentDocSlug: android-sdk-setup
---

## Сброс данных

SDK кэширует данные (сессии, события, свойства клиентов и т.д.) во внутренней базе данных и периодически отправляет их в Engagement API. После загрузки данных значения в веб-приложении Engagement обновляются, а кэшированные данные удаляются из внутренней базы данных SDK. Этот процесс называется **сброс данных**.

По умолчанию SDK автоматически сбрасывает данные, как только они отслеживаются, или когда приложение переходит в фоновый режим. Вы можете настроить [режим сброса](#режимы-сброса), чтобы настроить это поведение в соответствии с вашими потребностями.

Вы также можете полностью отключить автоматический сброс. В этом случае вы должны [вручную сбросить](#ручной-сброс) данные каждый раз, когда есть данные для сброса.

SDK будет сбрасывать данные только при наличии стабильного сетевого соединения. Если во время сброса произойдет ошибка соединения, данные будут оставаться в кэше до тех пор, пока соединение не станет стабильным и данные не будут успешно сброшены.

## Режимы сброса

SDK поддерживает следующие 4 режима сброса (определенные в `com.sendsay.sdk.models.FlushMode`) для указания того, как часто или должны ли данные сбрасываться автоматически.

| Название              | Описание |
| --------------------- | ----------- |
| `IMMEDIATE` (по умолчанию) | Сбрасывает все данные немедленно по мере их поступления. |
| `APP_CLOSE`           | Сбрасывает данные каждый раз, когда приложение переходит в неактивное состояние. |
| `PERIOD`              | Сбрасывает данные через интервал, указанный в `Sendsay.flushPeriod`, а также при закрытии приложения или переходе в фоновый режим. |
| `MANUAL`              | Отключает любую автоматическую загрузку. Разработчик несет ответственность за [ручной сброс данных](#ручной-сброс). |

Чтобы установить режим сброса, сначала [инициализируйте SDK](https://documentation.bloomreach.com/engagement/docs/android-sdk-setup), затем установите `flushMode` непосредственно в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.MANUAL
```

При использовании режима сброса `PERIOD` интервал по умолчанию составляет 60 минут. Чтобы указать другой интервал, используя значение `com.sendsay.sdk.models.FlushPeriod`, установите `flushPeriod` в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.PERIOD
Sendsay.flushPeriod = FlushPeriod(10, TimeUnit.MINUTES)
```

## Ручной сброс

Чтобы вручную запустить сброс данных в API, используйте следующий метод:

```kotlin
Sendsay.flushData()
```
