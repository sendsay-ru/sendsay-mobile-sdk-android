## Отправка данных

SDK кэширует данные (сессии, события, свойства клиентов и т.д.) во внутренней базе данных и периодически отправляет их в CDP Sendsay. После загрузки данных значения в базе данных аккаунта Sendsay обновляются, а кэшированные данные удаляются из внутренней базы данных SDK. Этот процесс называется **отправка данных**.

По умолчанию SDK автоматически отправляет данные, как только они возникают, или когда приложение переходит в фоновый режим. Вы можете настроить [режим сброса](#режимы-сброса), чтобы настроить это поведение в соответствии с вашими потребностями.

Вы также можете полностью отключить автоматическую отправку. В этом случае вы должны [вручную отправить](#ручная-отправка) данные каждый раз, когда есть данные для отправки или вы решили что для этого настало время.

SDK будет отправлять данные только при наличии стабильного сетевого соединения. Если во время отправки произойдет ошибка соединения, данные будут оставаться в кэше до тех пор, пока соединение не станет стабильным и данные не будут успешно отправлены.

## Режимы отправки

SDK поддерживает следующие 4 режима отправки (определенные в `com.sendsay.sdk.models.FlushMode`) для указания того, как часто или должны ли данные отправляться автоматически.

| Название              | Описание |
| --------------------- | ----------- |
| `IMMEDIATE` (по умолчанию) | Отправляет все данные немедленно по мере их поступления. |
| `APP_CLOSE`           | Опправляет данные каждый раз, когда приложение переходит в неактивное состояние. |
| `PERIOD`              | Отправляет данные через интервал, указанный в `Sendsay.flushPeriod`, а также при закрытии приложения или переходе в фоновый режим. |
| `MANUAL`              | Отключает любую автоматическую загрузку. Разработчик несет ответственность за [ручную отправку данных](#ручная-отправка). |

Чтобы установить режим отправки, сначала инициализируйте SDK, затем установите `flushMode` непосредственно в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.MANUAL
```

При использовании режима отправки `PERIOD` интервал по умолчанию составляет 60 минут. Чтобы указать другой интервал, используя значение `com.sendsay.sdk.models.FlushPeriod`, установите `flushPeriod` в синглтоне `Sendsay`:

```kotlin
Sendsay.flushMode = FlushMode.PERIOD
Sendsay.flushPeriod = FlushPeriod(10, TimeUnit.MINUTES)
```

## Ручная отправка

Чтобы вручную запустить отправку данных в Sendsay, используйте следующий метод:

```kotlin
Sendsay.flushData()
```
