# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Android SDK

SDK –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ —Å API Engagement —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—É—é HTTP/HTTPS —Å–≤—è–∑—å. SDK –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É API –∏ –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—É—é **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É API. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ä–µ–∂–∏–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ç—Ä–µ–±—É–µ–º–æ–≥–æ —É—Ä–æ–≤–Ω—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ —Ç–æ–∫–µ–Ω—É –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç [–¥–æ—Å—Ç—É–ø –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É API](https://documentation.bloomreach.com/engagement/reference/authentication#public-api-access) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º API-–∫–ª—é—á–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ–∫–µ–Ω–∞.

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ API –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

* `POST /track/v2/projects/<projectToken>/customers` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
* `POST /track/v2/projects/<projectToken>/customers/events` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
* `POST /track/v2/projects/<projectToken>/campaigns/clicks` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π –∫–∞–º–ø–∞–Ω–∏–π
* `POST /data/v2/projects/<projectToken>/consent/categories` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–∏–π
* `POST /webxp/s/<projectToken>/inappmessages?v=1` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è InApp —Å–æ–æ–±—â–µ–Ω–∏–π
* `POST /webxp/projects/<projectToken>/appinbox/fetch` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö AppInbox
* `POST /webxp/projects/<projectToken>/appinbox/markasread` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è AppInbox –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ
* `POST /campaigns/send-self-check-notification?project_id=<projectToken>` –¥–ª—è —á–∞—Å—Ç–∏ –ø–æ—Ç–æ–∫–∞ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞—Ä–∞–º–µ—Ç—Ä [–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](https://documentation.bloomreach.com/engagement/docs/android-sdk-configuration) `authorization` –ø—Ä–∏ [–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SDK](https://documentation.bloomreach.com/engagement/docs/android-sdk-setup#initialize-the-sdk):

```kotlin
class App : Application() {
    override fun onCreate() {
        super.onCreate()
        val configuration = SendsayConfiguration()
        configuration.authorization = "Token YOUR_API_KEY"
        configuration.projectToken = "YOUR_PROJECT_TOKEN"
        configuration.baseURL = "https://api.exponea.com"
        Sendsay.init(App.instance, configuration)
    }
}
```

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç [–¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É API](authentication#private-api-access) –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ Engagement API. [–¢–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞](https://documentation.bloomreach.com/engagement/docs/customer-token) —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–æ–¥–ø–∏—Å—å. –ö–æ–≥–¥–∞ API Bloomreach Engagement –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞, –æ–Ω —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞.

–¢–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **JSON Web Token (JWT)**, –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –æ—Ç—Ä–∞—Å–ª–µ–≤–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ [RFC 7519](https://tools.ietf.org/html/rfc7519), –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç–æ—Ä–æ–Ω–∞–º–∏.

SDK –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `Bearer <value>`. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è SDK –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–Ω–µ—á–Ω—ã—Ö —Ç–æ—á–µ–∫ Engagement API:

* `POST /webxp/projects/<projectToken>/appinbox/fetch` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö AppInbox
* `POST /webxp/projects/<projectToken>/appinbox/markasread` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è AppInbox –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ

–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä [–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](ios-sdk-configuration) `advancedAuthEnabled` –≤ `true` –ø—Ä–∏ [–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ SDK](ios-sdk-setup#initialize-the-sdk):

```kotlin
class App : Application() {
    override fun onCreate() {
        super.onCreate()
        val configuration = SendsayConfiguration()
        configuration.projectToken = "YOUR_PROJECT_TOKEN"
        configuration.baseURL = "https://api.exponea.com"
        configuration.authorization = "Token YOUR_API_KEY" // !!! –±–∞–∑–æ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
        configuration.advancedAuthEnabled = true
        Sendsay.init(App.instance, configuration)
    }
}
```

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `com.sendsay.sdk.services.AuthorizationProvider`, —É–±–µ–¥–∏–≤—à–∏—Å—å, —á—Ç–æ –º–µ—Ç–æ–¥ `getAuthorizationToken` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π JWT —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–¥–∏—Ä—É–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ ID –∫–ª–∏–µ–Ω—Ç–∞(–æ–≤) –∏ ID –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ API –∫–ª—é—á–∞:

```kotlin
class ExampleAuthProvider : AuthorizationProvider {
    override fun getAuthorizationToken(): String? {
        return "YOUR JWT TOKEN"
    }
}
```

–í—ã –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π `AuthorizationProvider` –≤ —Ñ–∞–π–ª–µ `AndroidManifest.xml` –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∫–∞–∫:

```xml
<application
    ...
    <meta-data
        android:name="SendsayAuthProvider"
        android:value="com.your.app.security.ExampleAuthProvider"
        />
</application>
```

> ‚ùóÔ∏è
>
> –¢–æ–∫–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å—Ç–æ—Ä–æ–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏—á–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞. –û–±—ã—á–Ω–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤—Ö–æ–¥–∞ –≤ backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –ª–∏—á–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è, —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, Single Sign-On –∏ —Ç.–¥.), backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç SDK.

> üìò
>
> –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑–¥–µ–ª—É [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞](customer-token#generating-customer-token) –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ —Ç–æ–∫–µ–Ω–∞–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—à–∞–≥–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ JWT —Ç–æ–∫–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞.

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

–ï—Å–ª–∏ –≤—ã —Ä–µ–∞–ª–∏–∑—É–µ—Ç–µ `AuthorizationProvider`, –Ω–æ –æ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–µ:
1. –ï—Å–ª–∏ –≤—ã –≤–∫–ª—é—á–∞–µ—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ —Ç–æ–∫–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ —Ñ–ª–∞–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `advancedAuthEnabled` –≤ `true`, –Ω–æ SDK –Ω–µ –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –æ–Ω –∑–∞–ø–∏—à–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
`Advanced auth has been enabled but provider has not been found`
2. –ï—Å–ª–∏ –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ –∫–ª–∞—Å—Å `SendsayAuthProvider` –≤ `AndroidManifest.xml`, –Ω–æ SDK –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –Ω–∞–π—Ç–∏, –æ–Ω –∑–∞–ø–∏—à–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
`Registered <your class> class has not been found with detailed info`
2. –ï—Å–ª–∏ –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ –∫–ª–∞—Å—Å `SendsayAuthProvider` –≤ `AndroidManifest.xml`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `AuthorizationProvider`, –æ–Ω –∑–∞–ø–∏—à–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
`Registered <your class> class has to implement com.sendsay.sdk.services.AuthorizationProvider`

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è AuthorizationProvider

–ó–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ HTTP –≤—ã–∑–æ–≤–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ú–µ—Ç–æ–¥ `getAuthorizationToken()` –Ω–∞–ø–∏—Å–∞–Ω –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º –ø–æ—Ç–æ–∫–µ. –ü–æ—ç—Ç–æ–º—É –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ª—é–±–æ–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥—Ä—É–≥–æ–π HTTP –≤—ã–∑–æ–≤) –∏ –∂–¥–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –±–ª–æ–∫–∏—Ä—É—è —ç—Ç–æ—Ç –ø–æ—Ç–æ–∫. –ï—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –Ω–µ —É–¥–∞–µ—Ç—Å—è, –≤—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ NULL, –Ω–æ –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –Ω–µ—É–¥–∞—á–µ–π.

```kotlin
class ExampleAuthProvider : AuthorizationProvider {
    override fun getAuthorizationToken(): String? = runBlocking {
        return@runBlocking suspendCoroutine { done ->
            retrieveTokenAsync(
                    success = {token -> done.resume(token)},
                    error = {error -> done.resume(null)}
            )
        }
    }
}
```

> üëç
>
> –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–µ—Ç–µ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã, –Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ - –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `getAuthorizationToken`.

### –ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞

–ó–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ HTTP –≤—ã–∑–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ —Ç—Ä–µ–±—É–µ—Ç.

–û–±—ã—á–Ω–æ JWT —Ç–æ–∫–µ–Ω—ã –∏–º–µ—é—Ç —Å–≤–æ–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. SDK –Ω–µ —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–∫–µ–Ω –≤ –∫–∞–∫–æ–º-–ª–∏–±–æ –∫—ç—à–µ. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫—ç—à —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ —Å–≤–æ–µ–º—É —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä:

```kotlin
class ExampleAuthProvider : AuthorizationProvider {

    private var tokenCache: String? = null

    override fun getAuthorizationToken(): String? = runBlocking {
         if (tokenCache.isNullOrEmpty()) {
             tokenCache = suspendCoroutine { done ->
                 retrieveTokenAsync(
                     success = {token -> done.resume(token)},
                     error = {error -> done.resume(null)}
                 )
             }
         }
         return@runBlocking tokenCache
     }
}
```

> ‚ùóÔ∏è
>
> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞. Android –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–ø—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ [KeyStore](https://developer.android.com/training/articles/keystore) –∏–ª–∏ [Encrypted Shared Preferences](https://developer.android.com/reference/androidx/security/crypto/EncryptedSharedPreferences).

> ‚ùóÔ∏è
>
> –¢–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–º ID –∫–ª–∏–µ–Ω—Ç–æ–≤. –ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –µ—Å–ª–∏ ID –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑–º–µ–Ω—è—é—Ç—Å—è (–∏–∑-–∑–∞ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–æ–≤ `identifyCustomer` –∏–ª–∏ `anonymize`), —Ç–æ–∫–µ–Ω –∫–ª–∏–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –±—É–¥—É—â–∏—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, –≤—ã–∑–≤–∞–Ω–Ω—ã—Ö –¥–ª—è –Ω–æ–≤—ã—Ö ID –∫–ª–∏–µ–Ω—Ç–æ–≤.